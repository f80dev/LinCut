<div style="display: inline-block;width:100%;min-width:350px;max-width: 600px;position:relative;height:100vh;">
  <div *ngIf="short_url==''" style="padding:5%;text-align: center;position:relative;height: 100%;">
    <mat-icon (click)="open_settings()" class="system_button">settings</mat-icon>
    <h1>{{environment.title}}</h1>
    <p>Rediriger vos adresses internet en ajoutant des conditions d'accès</p>
    <br>
    <app-input label="L'adresse internet"
               width="100%" value_type="text"
               [showClear]="true" help="Adresse du site de destination"
               [value]="url" (valueChange)="url=$event">
    </app-input>
    <br>

    <mat-form-field style="width: 100%;">
      <mat-label>Conditions d'accès</mat-label>
      <mat-select required value="redirect" [(ngModel)]="service_selected" autofocus (valueChange)="changeOperation($event)">
        <mat-option *ngFor="let service of services" [value]="service">{{service.service}}</mat-option>
      </mat-select>
      <mat-hint>{{service_selected.desc}}</mat-hint>
    </mat-form-field>
    <br><br>

    <mat-expansion-panel>
      <mat-expansion-panel-header>Options avancées</mat-expansion-panel-header>
      <app-input label="Durée de validité du lien"
                 unity="jours"
                 width="90%" value_type="slider"
                 help="Nombre de jours pendant lesquel le lien fonctionne"
                 [max]="365" [min]="1"
                 [value]="duration" (valueChange)="duration=$event">
      </app-input>

      <app-input label="Message ou redirection hors délai"
                 width="90%" value_type="text"
                 [value]="message" (valueChange)="message=$event">
      </app-input>

    </mat-expansion-panel>

    <button mat-raised-button (click)="short()" color="primary"
            *ngIf="url!=''"
            style="bottom: 70px;right:15px;position: absolute;width:130px;height:55px;">
      <div style="font-size: large;">Raccourcir</div>
    </button>
  </div>


  <div *ngIf="short_url!=''">
    <div class="mat-subtitle-1" style="margin-top: 10%;">
      Votre lien à partager:<br>
      <a [href]="short_url" target="_blank" class="mat-headline-6 color-primary">
        <strong>{{short_url}}</strong>
      </a>
      <br>

      <div style="position:absolute;bottom:50px;width:100%;text-align: center;display:block;" >
        <button mat-raised-button (click)="copy()">
          Copier
        </button>
        <button mat-raised-button (click)="share()" color="primary">
          Partager
        </button>
        <button mat-raised-button (click)="clear()">
          Nouveau
        </button>
      </div>
    </div>
  </div>
</div>
